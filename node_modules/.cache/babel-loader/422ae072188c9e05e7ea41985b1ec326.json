{"ast":null,"code":"import * as React from \"react\";\nexport function useEventListeners() {\n  var listeners = React.useRef(new Map());\n  var currentListeners = listeners.current;\n  var add = React.useCallback(function (el, type, listener, options) {\n    listeners.current.set(listener, {\n      type: type,\n      el: el,\n      options: options\n    });\n    el.addEventListener(type, listener, options);\n  }, []);\n  var remove = React.useCallback(function (el, type, listener, options) {\n    el.removeEventListener(type, listener, options);\n    listeners.current.delete(listener);\n  }, []);\n  React.useEffect(function () {\n    return function () {\n      currentListeners.forEach(function (value, key) {\n        remove(value.el, value.type, key, value.options);\n      });\n    };\n  }, [remove, currentListeners]);\n  return {\n    add: add,\n    remove: remove\n  };\n}","map":{"version":3,"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AA6BA,OAAO,SAASC,iBAAT,GAA6C;EAClD,IAAMC,SAAS,GAAGF,KAAK,CAACG,MAANH,CAAa,IAAII,GAAJ,EAAbJ,CAAlB;EACA,IAAMK,gBAAgB,GAAGH,SAAS,CAACI,OAAnC;EAEA,IAAMC,GAAG,GAAGP,KAAK,CAACQ,WAANR,CAAkB,UAACS,EAAD,EAAKC,IAAL,EAAWC,QAAX,EAAqBC,OAArB,EAAiC;IAC7DV,SAAS,CAACI,OAAVJ,CAAkBW,GAAlBX,CAAsBS,QAAtBT,EAAgC;MAAEQ,IAAF,EAAEA,IAAF;MAAQD,EAAR,EAAQA,EAAR;MAAYG;IAAZ,CAAhCV;IACAO,EAAE,CAACK,gBAAHL,CAAoBC,IAApBD,EAA0BE,QAA1BF,EAAoCG,OAApCH;EAFU,GAGT,EAHST,CAAZ;EAKA,IAAMe,MAAM,GAAGf,KAAK,CAACQ,WAANR,CAAkB,UAACS,EAAD,EAAKC,IAAL,EAAWC,QAAX,EAAqBC,OAArB,EAAiC;IAChEH,EAAE,CAACO,mBAAHP,CAAuBC,IAAvBD,EAA6BE,QAA7BF,EAAuCG,OAAvCH;IACAP,SAAS,CAACI,OAAVJ,CAAkBe,MAAlBf,CAAyBS,QAAzBT;EAFa,GAGZ,EAHYF,CAAf;EAKAA,KAAK,CAACkB,SAANlB,CACE;IAAA,OAAM,YAAM;MACVK,gBAAgB,CAACc,OAAjBd,CAAyB,UAACe,KAAD,EAAQC,GAAR,EAAgB;QACvCN,MAAM,CAACK,KAAK,CAACX,EAAP,EAAWW,KAAK,CAACV,IAAjB,EAAuBW,GAAvB,EAA4BD,KAAK,CAACR,OAAlC,CAANG;MADF;IAFJ,CACE;EAAA,CADFf,EAME,CAACe,MAAD,EAASV,gBAAT,CANFL;EASA,OAAO;IAAEO,GAAF,EAAEA,GAAF;IAAOQ;EAAP,CAAP;AACD","names":["React","useEventListeners","listeners","useRef","Map","currentListeners","current","add","useCallback","el","type","listener","options","set","addEventListener","remove","removeEventListener","delete","useEffect","forEach","value","key"],"sources":["../../src/use-event-listeners.ts"],"sourcesContent":["import * as React from \"react\"\n\ninterface EventListeners {\n  add<K extends keyof DocumentEventMap>(\n    el: EventTarget,\n    type: K,\n    listener: (this: Document, ev: DocumentEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  add(\n    el: EventTarget,\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  remove<K extends keyof DocumentEventMap>(\n    el: EventTarget,\n    type: K,\n    listener: (this: Document, ev: DocumentEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ): void\n  remove(\n    el: EventTarget,\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void\n}\n\nexport function useEventListeners(): EventListeners {\n  const listeners = React.useRef(new Map())\n  const currentListeners = listeners.current\n\n  const add = React.useCallback((el, type, listener, options) => {\n    listeners.current.set(listener, { type, el, options })\n    el.addEventListener(type, listener, options)\n  }, [])\n\n  const remove = React.useCallback((el, type, listener, options) => {\n    el.removeEventListener(type, listener, options)\n    listeners.current.delete(listener)\n  }, [])\n\n  React.useEffect(\n    () => () => {\n      currentListeners.forEach((value, key) => {\n        remove(value.el, value.type, key, value.options)\n      })\n    },\n    [remove, currentListeners],\n  )\n\n  return { add, remove }\n}\n"]},"metadata":{},"sourceType":"module"}