{"ast":null,"code":"/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__, __TEST__ } from \"./assertion\";\nexport function runIfFn(valueOrFn) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return isFunction(valueOrFn) ? valueOrFn.apply(void 0, args) : valueOrFn;\n}\nexport function callAllHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function func(event) {\n    fns.some(function (fn) {\n      fn == null ? void 0 : fn(event);\n      return event == null ? void 0 : event.defaultPrevented;\n    });\n  };\n}\nexport function callAll() {\n  for (var _len3 = arguments.length, fns = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    fns[_key3] = arguments[_key3];\n  }\n\n  return function mergedFn(arg) {\n    fns.forEach(function (fn) {\n      fn == null ? void 0 : fn(arg);\n    });\n  };\n}\nexport var compose = function compose(fn1) {\n  for (var _len4 = arguments.length, fns = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    fns[_key4 - 1] = arguments[_key4];\n  }\n\n  return fns.reduce(function (f1, f2) {\n    return function () {\n      return f1(f2.apply(void 0, arguments));\n    };\n  }, fn1);\n};\nexport function once(fn) {\n  var result;\n  return function func() {\n    if (fn) {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      result = fn.apply(this, args);\n      fn = null;\n    }\n\n    return result;\n  };\n}\nexport var noop = function noop() {};\nexport var warn = once(function (options) {\n  return function () {\n    var condition = options.condition,\n        message = options.message;\n\n    if (condition && __DEV__) {\n      console.warn(message);\n    }\n  };\n});\nexport var error = once(function (options) {\n  return function () {\n    var condition = options.condition,\n        message = options.message;\n\n    if (condition && __DEV__) {\n      console.error(message);\n    }\n  };\n});\n\nvar promiseMicrotask = function promiseMicrotask(callback) {\n  Promise.resolve().then(callback);\n};\n\nexport var scheduleMicrotask = __TEST__ ? function (fn) {\n  return fn();\n} : typeof queueMicrotask === \"function\" ? queueMicrotask : promiseMicrotask;\nexport var pipe = function pipe() {\n  for (var _len6 = arguments.length, fns = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    fns[_key6] = arguments[_key6];\n  }\n\n  return function (v) {\n    return fns.reduce(function (a, b) {\n      return b(a);\n    }, v);\n  };\n};\n\nvar distance1D = function distance1D(a, b) {\n  return Math.abs(a - b);\n};\n\nvar isPoint = function isPoint(point) {\n  return \"x\" in point && \"y\" in point;\n};\n\nexport function distance(a, b) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b);\n  }\n\n  if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2));\n  }\n\n  return 0;\n}","map":{"version":3,"mappings":"AAAA;AACA,SAASA,UAAT,EAAqBC,QAArB,EAA+BC,OAA/B,EAAwCC,QAAxC,QAAwD,aAAxD;AAGA,OAAO,SAASC,OAAT,CACLC,SADK,EAGF;EAAA,kCADAC,IACA;IADAA,IACA,UADAA,GACAC,eADAD;EACA;;EACH,OAAON,UAAU,CAACK,SAAD,CAAVL,GAAwBK,SAAS,MAATA,SAAaC,IAAbD,CAAxBL,GAA6CK,SAApD;AACD;AAED,OAAO,SAASG,eAAT,GAEL;EAAA,mCADGC,GACH;IADGA,GACH,OADGA,GACHF,gBADGE;EACH;;EACA,OAAO,SAASC,IAAT,CAAcC,KAAd,EAA8C;IACnDF,GAAG,CAACG,IAAJH,CAAUI,YAAD,EAAQ;MACfA,EAAE,QAAFA,cAAE,CAAGF,KAAH,CAAFE;MACA,OAAOF,KAAP,QAAOA,GAAP,MAAOA,QAAK,CAAEG,gBAAd;IAFF;EADF;AAMD;AAED,OAAO,SAASC,OAAT,GAAmE;EAAA,mCAAxBN,GAAwB;IAAxBA,GAAwB,OAAxBA,GAAwBF,gBAAxBE;EAAwB;;EACxE,OAAO,SAASO,QAAT,CAAkBC,GAAlB,EAAgD;IACrDR,GAAG,CAACS,OAAJT,CAAaI,YAAD,EAAQ;MAClBA,EAAE,QAAFA,cAAE,CAAGI,GAAH,CAAFJ;IADF;EADF;AAKD;AAED,OAAO,IAAMM,OAAO,GAAG,SAAVA,OAAU,CACrBC,GADqB;EAAA,mCAElBX,GAFkB;IAElBA,GAFkB,WAElBA,GAFkBF,gBAElBE;EAFkB;;EAAA,OAGlBA,GAAG,CAACY,MAAJZ,CAAW,UAACa,EAAD,EAAKC,EAAL;IAAA,OAAY;MAAA,OAAaD,EAAE,CAACC,EAAE,MAAFA,SAAGhB,SAAHgB,CAAD,CAAf;IAAvB,CAAW;EAAA,CAAXd,EAAqDW,GAArDX,CAHkB;AAAhB;AAKP,OAAO,SAASe,IAAT,CAAqCX,EAArC,EAAoD;EACzD,IAAIY,MAAJ;EAEA,OAAO,SAASf,IAAT,GAAiD;IACtD,IAAIG,EAAJ,EAAQ;MAAA,mCADyBP,IACzB;QADyBA,IACzB,OADyBA,GACzBC,gBADyBD;MACzB;;MACNmB,MAAM,GAAGZ,EAAE,CAACa,KAAHb,CAAS,IAATA,EAAeP,IAAfO,CAATY;MACAZ,EAAE,GAAG,IAALA;IACD;;IAED,OAAOY,MAAP;EANF;AAQD;AAED,OAAO,IAAME,IAAI,GAAG,SAAPA,IAAO,GAAM,CAAnB;AAOP,OAAO,IAAMC,IAAI,GAAGJ,IAAI,CAAEK,iBAAD;EAAA,OAA6B,YAAM;IAC1D,IAAQC,SAAR,GAA+BD,OAA/B,CAAQC,SAAR;IAAA,IAAmBC,OAAnB,GAA+BF,OAA/B,CAAmBE,OAAnB;;IACA,IAAID,SAAS,IAAI5B,OAAjB,EAA0B;MACxB8B,OAAO,CAACJ,IAARI,CAAaD,OAAbC;IACD;EAJqB,CAAC;AAAA,CAAD,CAAjB;AAOP,OAAO,IAAMC,KAAK,GAAGT,IAAI,CAAEK,iBAAD;EAAA,OAA6B,YAAM;IAC3D,IAAQC,SAAR,GAA+BD,OAA/B,CAAQC,SAAR;IAAA,IAAmBC,OAAnB,GAA+BF,OAA/B,CAAmBE,OAAnB;;IACA,IAAID,SAAS,IAAI5B,OAAjB,EAA0B;MACxB8B,OAAO,CAACC,KAARD,CAAcD,OAAdC;IACD;EAJsB,CAAC;AAAA,CAAD,CAAlB;;AAOP,IAAME,gBAAgB,GAAIC,SAApBD,gBAAoBC,SAAD,EAA4B;EACnDC,OAAO,CAACC,OAARD,GAAkBE,IAAlBF,CAAuBD,QAAvBC;AADF;;AAIA,OAAO,IAAMG,iBAAiB,GAAGpC,QAAQ,GACpCU,YAAD;EAAA,OAAsBA,EAAE,EAAxB;AAAA,CADqC,GAErC,OAAO2B,cAAP,KAA0B,UAA1B,GACAA,cADA,GAEAN,gBAJG;AAMP,OAAO,IAAMO,IAAI,GAAG,SAAPA,IAAO;EAAA,mCAAOhC,GAAP;IAAOA,GAAP,OAAOA,GAAPF,gBAAOE;EAAP;;EAAA,OAAoCiC,WAAD;IAAA,OACrDjC,GAAG,CAACY,MAAJZ,CAAW,UAACkC,CAAD,EAAIC,CAAJ;MAAA,OAAUA,CAAC,CAACD,CAAD,CAAX;IAAA,CAAXlC,EAA2BiC,CAA3BjC,CADqD;EAAA,CAAnC;AAAb;;AAGP,IAAMoC,UAAU,GAAG,SAAbA,UAAa,CAACF,CAAD,EAAYC,CAAZ;EAAA,OAA0BE,IAAI,CAACC,GAALD,CAASH,CAAC,GAAGC,CAAbE,CAA1B;AAAA,CAAnB;;AAGA,IAAME,OAAO,GAAIC,SAAXD,OAAWC,MAAD;EAAA,OACd,OAAOA,KAAP,IAAgB,OAAOA,KADT;AAAA,CAAhB;;AAGA,OAAO,SAASC,QAAT,CAA4CP,CAA5C,EAAkDC,CAAlD,EAAwD;EAC7D,IAAI3C,QAAQ,CAAC0C,CAAD,CAAR1C,IAAeA,QAAQ,CAAC2C,CAAD,CAA3B,EAAgC;IAC9B,OAAOC,UAAU,CAACF,CAAD,EAAIC,CAAJ,CAAjB;EACD;;EACD,IAAII,OAAO,CAACL,CAAD,CAAPK,IAAcA,OAAO,CAACJ,CAAD,CAAzB,EAA8B;IAC5B,IAAMO,MAAM,GAAGN,UAAU,CAACF,CAAC,CAACS,CAAH,EAAMR,CAAC,CAACQ,CAAR,CAAzB;IACA,IAAMC,MAAM,GAAGR,UAAU,CAACF,CAAC,CAACW,CAAH,EAAMV,CAAC,CAACU,CAAR,CAAzB;IACA,OAAOR,IAAI,CAACS,IAALT,CAAUK,eAAM,EAAI,CAAJ,CAANA,YAAcE,MAAdF,EAAwB,CAAxBA,CAAVL,CAAP;EACD;;EACD,OAAO,CAAP;AACD","names":["isFunction","isNumber","__DEV__","__TEST__","runIfFn","valueOrFn","args","arguments","callAllHandlers","fns","func","event","some","fn","defaultPrevented","callAll","mergedFn","arg","forEach","compose","fn1","reduce","f1","f2","once","result","apply","noop","warn","options","condition","message","console","error","promiseMicrotask","callback","Promise","resolve","then","scheduleMicrotask","queueMicrotask","pipe","v","a","b","distance1D","Math","abs","isPoint","point","distance","xDelta","x","yDelta","y","sqrt"],"sources":["../../src/function.ts"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__, __TEST__ } from \"./assertion\"\nimport { AnyFunction, FunctionArguments } from \"./types\"\n\nexport function runIfFn<T, U>(\n  valueOrFn: T | ((...fnArgs: U[]) => T),\n  ...args: U[]\n): T {\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn\n}\n\nexport function callAllHandlers<T extends (event: any) => void>(\n  ...fns: (T | undefined)[]\n) {\n  return function func(event: FunctionArguments<T>[0]) {\n    fns.some((fn) => {\n      fn?.(event)\n      return event?.defaultPrevented\n    })\n  }\n}\n\nexport function callAll<T extends AnyFunction>(...fns: (T | undefined)[]) {\n  return function mergedFn(arg: FunctionArguments<T>[0]) {\n    fns.forEach((fn) => {\n      fn?.(arg)\n    })\n  }\n}\n\nexport const compose = <T>(\n  fn1: (...args: T[]) => T,\n  ...fns: Array<(...args: T[]) => T>\n) => fns.reduce((f1, f2) => (...args) => f1(f2(...args)), fn1)\n\nexport function once<T extends AnyFunction>(fn?: T | null) {\n  let result: any\n\n  return function func(this: any, ...args: Parameters<T>) {\n    if (fn) {\n      result = fn.apply(this, args)\n      fn = null\n    }\n\n    return result\n  }\n}\n\nexport const noop = () => {}\n\ntype MessageOptions = {\n  condition: boolean\n  message: string\n}\n\nexport const warn = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.warn(message)\n  }\n})\n\nexport const error = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.error(message)\n  }\n})\n\nconst promiseMicrotask = (callback: VoidFunction) => {\n  Promise.resolve().then(callback)\n}\n\nexport const scheduleMicrotask = __TEST__\n  ? (fn: VoidFunction) => fn()\n  : typeof queueMicrotask === \"function\"\n  ? queueMicrotask\n  : promiseMicrotask\n\nexport const pipe = <R>(...fns: Array<(a: R) => R>) => (v: R) =>\n  fns.reduce((a, b) => b(a), v)\n\nconst distance1D = (a: number, b: number) => Math.abs(a - b)\ntype Point = { x: number; y: number }\n\nconst isPoint = (point: any): point is { x: number; y: number } =>\n  \"x\" in point && \"y\" in point\n\nexport function distance<P extends Point | number>(a: P, b: P) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b)\n  }\n  if (isPoint(a) && isPoint(b)) {\n    const xDelta = distance1D(a.x, b.x)\n    const yDelta = distance1D(a.y, b.y)\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2)\n  }\n  return 0\n}\n"]},"metadata":{},"sourceType":"module"}